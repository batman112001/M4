<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>üîê Admin Panel</h2>
    <input type="password" id="password" placeholder="Enter Admin Password">
    <input type="text" id="fileId" placeholder="File ID (e.g. M5a)">
    <input type="text" id="fileUrl" placeholder="File URL (Google Drive direct link)">
    <button onclick="addFile()">Add File</button>
    <div id="status"></div>
  </div>

  <script>
    async function addFile() {
      const password = document.getElementById("password").value;
      const id = document.getElementById("fileId").value.trim();
      const url = document.getElementById("fileUrl").value.trim();
      const status = document.getElementById("status");

      if (!id || !url) {
        alert("‚ùå Enter both File ID and URL");
        return;
      }

      status.textContent = "‚è≥ Adding...";

      try {
        let res = await fetch("/api/files", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ password, id, url })
        });

        let data = await res.json();
        if (res.ok) {
          status.textContent = `‚úÖ File ${id} added! Share downloads.html with ID.`;
        } else {
          status.textContent = "‚ùå " + data.error;
        }
      } catch (err) {
        status.textContent = "‚ùå Error: " + err.message;
      }
    }
  </script>
</body>
</html>
